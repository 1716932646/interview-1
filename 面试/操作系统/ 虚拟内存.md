# 虚拟内存的分布
虚拟地址空间0~3G用于应用层
虚拟地址空间3~4G用于内核层
![image](https://pic1.zhimg.com/80/v2-fa4e727f2a22ac21128986094bc8f8a0_1440w.jpg)

内核空间分为**3部分**，ZONE_DMA，ZONE_NORMAL，ZONE_HIGHMEME。

* ZONE_DMA，0-16M，直接内存访问。该区域的物理页面专门供I/O设备的DMA使用。
* ZONR_NORMAL，16M-896M，内核最重要的部分，该区域的物理页面是内核能够直接使用的。
* ZONE_HIGHMEM，896M-结束，共128M，高端内存。主要用于32位Linux系统中，映射高于1G的物理内存。64位不需要高端内存。
# 虚拟内存存在的原因

在系统中所有的进程之间是共享CPU和主存这些内存资源的。当进程数量变多时，所需要的内存资源就会相应的增加。可能会导致部分程序没有主存空间可用。此外，由于资源是共享的，那么就有可能导致某个进程不小心写了另一个进程所使用的内存，进而导致程序运行不符合正常逻辑。

虚拟内存提供了三个重要的能力： **缓存，内存管理，内存保护**

1. 将主存视为一个存储在磁盘上的地址空间的高速缓存，在主存中只保存活动区域，并根据需要在磁盘和主存之间来回传送数据
2. 为每个进程提供了一致的地址空间，简化内存管理
3. 保护了每个进程的地址空间不被其他进程破坏